---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const sections = [
  {
    title: "Introducción",
    items: [
      { title: "¿Qué es SUMA?", href: "/docs/filosofia" },
      { title: "Empezar", href: "/docs/getting-started" },
    ]
  },
  {
    title: "Arquitectura",
    items: [
      { title: "Core (Rust)", href: "/docs/core" },
      { title: "Lenguaje SUMA", href: "/docs/lenguaje" },
      { title: "Engine", href: "/docs/engine" },
    ]
  },
  {
    title: "Conceptos Clave",
    items: [
      { title: "Modelos y Artefactos", href: "/docs/modelos-artefactos" },
      { title: "Valores y Dominios", href: "/docs/valores-dominios" },
      { title: "Queries", href: "/docs/queries" },
      { title: "Trazabilidad", href: "/docs/trazabilidad" },
    ]
  },
  {
    title: "Guías",
    items: [
      { title: "Resumen Técnico", href: "/docs/resumen-tecnico" },
      { title: "Ejemplos", href: "/docs/ejemplos" },
    ]
  }
];
---

<aside class="fixed inset-y-0 left-0 z-30 hidden h-full w-64 shrink-0 overflow-y-auto border-r border-border/50 bg-background/95 backdrop-blur-sm supports-[backdrop-filter]:bg-background/60 md:block lg:w-72">
  <div class="flex h-full flex-col">
    <div class="p-6">
      <!-- Logo -->
      <div class="mb-10">
        <a href="/" class="flex items-center space-x-3 group transition-all duration-200">
          <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-linear-to-br from-primary to-primary/80 text-primary-foreground shadow-sm group-hover:shadow-md transition-all duration-200">
            <span class="font-bold text-lg">S</span>
          </div>
          <span class="text-2xl font-bold bg-linear-to-r from-foreground to-foreground/80 bg-clip-text text-transparent">SUMA</span>
        </a>
      </div>
      
      <!-- Navigation -->
      <nav class="space-y-10">
        {sections.map((section) => (
          <div class="space-y-4">
            <h4 class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 px-1">
              {section.title}
            </h4>
            <ul class="space-y-2">
              {section.items.map((item) => {
                const isActive = currentPath === item.href || currentPath.startsWith(item.href + '/');
                return (
                  <li>
                    <a 
                      href={item.href}
                      class={`group relative flex items-center rounded-lg px-4 py-2.5 text-sm font-medium transition-all duration-200 ${
                        isActive
                          ? "bg-primary/10 text-primary shadow-sm"
                          : "text-muted-foreground/80 hover:text-foreground hover:bg-muted/50"
                      }`}
                    >
                      <span class="relative z-10">{item.title}</span>
                      {isActive && (
                        <span class="absolute left-0 top-1/2 h-8 w-0.5 -translate-y-1/2 rounded-full bg-linear-to-b from-primary to-primary/60" />
                      )}
                      <div class={`ml-auto transition-all duration-200 ${
                        isActive ? "opacity-100" : "opacity-0 group-hover:opacity-100"
                      }`}>
                        <span class={`h-1.5 w-1.5 rounded-full ${
                          isActive ? "bg-primary" : "bg-muted-foreground/40"
                        }`} />
                      </div>
                    </a>
                  </li>
                );
              })}
            </ul>
          </div>
        ))}
      </nav>
    </div>
    
    <!-- Version badge -->
    <div class="mt-auto p-6 border-t border-border/30">
      <div class="text-xs text-muted-foreground/60">
        <div class="flex items-center justify-between px-1">
          <span class="font-medium">Versión</span>
          <span class="rounded-full bg-muted/50 px-3 py-1.5 text-xs font-medium text-foreground/80 border border-border/30">
            v0.1.0
          </span>
        </div>
      </div>
    </div>
  </div>
</aside>